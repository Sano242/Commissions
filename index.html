<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="author" content="Sangsoo Park">
  <title>Commissions</title>
  <link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>

  <p>

  <h1>Week Commission Report Calculator</h1>

  <hr>
  
  <script>

    // Variable for total earnings
    let final;

    // Variable for total sales in a week
    let total = 0.0;

    // Variable to collect user input
    let input;

    // Prompts user for username
    let username = prompt("Hello, welcome to the weekly commission report generator. Please enter your username: ");

    // Runs loop until user provides a valid username
    while(username == null || username == "" ){

      username = prompt("Invalid Response. Please enter your username: ");
      
    }

    // Runs until user inputs "done", case insensitive, collects the user's individual sale amounts and adds them to the total. String inputs that are not "done" or numerical variables below 0 are invalid input.
    while(input != "done"){
    
      input = prompt("Enter the dollar amount for your sales a single sale at a time. Enter Done when your done.");

      input = input.toLowerCase();

      if(input != "done"){

        input = parseFloat(input);

        if(input == NaN || input < 0.0){

          alert("Invalid Response. Please enter a valid response.");
          
        }
        else{

          total += input;
          
        }
        
      }
      
    }

    // Variables for storing the commission amount and for storing the commission percentage.
    let comm;
    let percent;

    // Determines the commission percentage based on the total sales and calculates the commission amount based on that percentage. 
    if(total > 0.01 && total < 500.00){

      comm = total * 0.05;

      percent = 5
      
    } else if(total >= 500.00 && total < 1000.00){

      comm = total * 0.1;

      percent = 10;
      
    } else if(total > 1000){

      comm = total * 0.15;

      percent = 15;
      
    } else{

      percent = 0;
      
    }

    // Calculates the final earnings by adding the commission amount to the total sales.
    final = total + comm;

    // Sets all numerical variables to show only two decimal places
    total = total.toFixed(2);
    comm = comm.toFixed(2);
    final = final.toFixed(2);
    
  </script>

  <script>

    // Displays the username, total sales, commission percentage, commission amount, and final earnings to the page.
    document.write("<div><p>Hello <b>" + username + "</b>, Here is your Weekly Commission Report,<br><br>Your sales total is <b>$" + total + "</b>, so your commission rate is <b>" + percent + "%</b><br>Your total commission is <b>$" + comm + "</b>.<br>Your total earnings are <b>$" + final + "</b>.</p></div>");

    
  </script>
  
</body>

</html>